<div class="wrapper">
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-6">
            <h5>PPC Calendar
            </h5>
          </div>
          <div class="col-sm-6">
            <div class="row" style="text-align: center;">
              <div class="col-md-2" style="padding: unset !important;">

              </div>
              <div class="col-sm-5 mb-2">
                <select class="custom-select" name="Monthname" (change)="selectedMonth($event.target.value)"
                  #Monthname='ngModel' [(ngModel)]='monthname'>
                  <option value="Jan">Jan</option>
                  <option value="Feb">Feb</option>
                  <option value="Mar">Mar</option>
                  <option value="Apr">Apr</option>
                  <option value="May">May</option>
                  <option value="June">June</option>
                  <option value="July">July</option>
                  <option value="Aug">Aug</option>
                  <option value="Sept">Sept</option>
                  <option value="Oct">Oct</option>
                  <option value="Nov">Nov</option>
                  <option value="Dec">Dec</option>
                </select>
              </div>

              <div class="col-md-2" style="padding: unset !important;">
                <!--<select class="form-control" *ngIf="plantservice" name="myselect" #mySelect
                  (change)="selectedGrid($event.target.value)" style="height: calc(2.10rem);padding: 5px 13px 6px 9px;">
                  < !-- <option value="0">--Select--</option> -- >
                  <option *ngFor="let pl of plantservice.splantlist" value="{{pl.plantcode}}">
                    {{ pl.plantshortname }}
                  </option>
                </select>-->
                <button class="btn bg-summary " (click)="summary2()"
                  style="padding: 4px 10px 4px 10px;">Summary</button>

              </div>

              <div class="col-md-1" style="padding: unset !important;">
                <button class="btn btn-primary " (click)="loaddata()" style="padding: 2px 10px 3px 10px;"><i
                    class="fa fa-refresh" aria-hidden="true"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-6">
          <h5>{{monthname}} Compliance</h5>
        </div>
        <div class="col-md-6 text-right">
          <h5 style="color:orange;">{{compliancePer}}%</h5>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <!--.card 1-->
          <div class="card card-primary card-outline">
            <div class="card-header">
              <div class="row ">
                <div class="col-md-12 text-center">
                  <h5 class="card-title-md">{{monthname}} (1st to 10th)</h5>
                </div>
              </div>
            </div>

            <div class="card-body">
              <div class="row">

                <div class="col-xl-12 col-md-6" (click)="summary(firstcolumn[0])">
                  <div class="card bg-danger update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length1,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">Below 32%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-end" style="font-size: 35px"></i>

                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record
                        {{ length1 }}
                      </p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(firstcolumn[1])">
                  <div class="card bg-yellow update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length2,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">33% to 36%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-half" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length2 }}</p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(firstcolumn[2])">
                  <div class="card bg-success update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length3,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">Above 36%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-start" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length3 }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>


          </div>
          <!-- /.card 1 -->
          <!-- /.col -->
        </div>

        <div class="col-md-4">
          <!--.card 1-->
          <div class="card card-primary card-outline">
            <div class="card-header">
              <div class="row ">
                <div class="col-md-12 text-center">
                  <h5 class="card-title-md">{{monthname}} (11st to 20th)</h5>
                </div>
              </div>
            </div>

            <div class="card-body">
              <div class="row">

                <div class="col-xl-12 col-md-6" (click)="summary(secondcolumn[0])">
                  <div class="card bg-danger update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length4,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">Below 60%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-end" style="font-size: 35px"></i>

                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length4 }}</p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(secondcolumn[1])">
                  <div class="card bg-yellow update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length5,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">61% to 65%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-half" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length5 }}</p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(secondcolumn[2])">
                  <div class="card bg-success update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length6,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">Above 65%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-start" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length6 }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <!-- /.card 1 -->
          <!-- /.col -->
        </div>


        <div class="col-md-4">
          <!--.card 1-->
          <div class="card card-primary card-outline">
            <div class="card-header">
              <div class="row ">
                <div class="col-md-12 text-center">
                  <h5 class="card-title-md">{{monthname}} (21st to {{lastDate}}th)</h5>
                </div>
              </div>
            </div>

            <div class="card-body">
              <div class="row">
                <div class="col-xl-12 col-md-6" (click)="summary(thirdcolumn[0])">
                  <div class="card bg-danger update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length7,allrecord) | number:'1.2-2' }}%

                          </h4>
                          <h6 class="text-white m-b-0">Below 90%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-end" style="font-size: 35px"></i>

                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length7 }}</p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(thirdcolumn[1])">
                  <div class="card bg-yellow update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">

                          <h4 class="text-white">
                            {{ this.calPer(length8,allrecord) | number:'1.2-2' }}%
                          </h4>

                          <h6 class="text-white m-b-0">91% to 98%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-half" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length8 }}</p>
                    </div>
                  </div>
                </div>

                <div class="col-xl-12 col-md-6" (click)="summary(thirdcolumn[2])">
                  <div class="card bg-success update-card">
                    <div class="card-block">
                      <div class="row align-items-end">
                        <div class="col-8">
                          <h4 class="text-white">
                            {{ this.calPer(length9,allrecord) | number:'1.2-2' }}%
                          </h4>
                          <h6 class="text-white m-b-0">Above 98%</h6>
                        </div>
                        <div class="col-4 text-right">
                          <i class="fa fa-hourglass-start" style="font-size: 35px"></i>
                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <p class="text-white m-b-0"><i class="feather icon-clock text-white f-14 m-r-10"></i>
                        No. of Record {{ length9 }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /.card 1 -->
          <!-- /.col -->
        </div>


      </div>
    </section>

    <!--Summary Modal -->
    <div class="modal fade bd-example-modal-xl" id="summaryModal" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <div class="row col-md-11">
              <div class="col-md-6">
                <h5>PPC Summary
                </h5>
              </div>

            </div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

            <p-table #dt [columns]="cols" [style]="{'text-align': 'center', 'font-size': '0.7em'}" [responsive]="true"
              selectionMode="single" [style]="{'width':'100%'}" [value]="summaryModalData" [paginator]="false"
              [rows]="5" [responsive]="true">

              <ng-template pTemplate="header" let-columns>
                <!-- header button section -->
                <tr>
                  <td colspan="2" style=" width:170px;">
                    <div class="input-group mb-2 ">
                      <input type="text" pInputText placeholder="Global Filter"
                        (input)="dt.filterGlobal($event.target.value, 'contains')" class="form-control fix-height">
                      <div class="input-group-append fix-height">
                        <i class="fa fa-search input-group-text"></i>
                      </div>
                    </div>
                  </td>
                  <td style="width:135px;">
                    <button type="button" label="EXCEL" (click)="dt.exportCSV()" class="btn btn-success btn-sm mb-2">
                      <i class="fa fa-file-excel-o"></i> Export</button>
                  </td>
                  <td style="width:245px;" *ngIf="modaltype==1"></td>
                  <td style="width:195px;" *ngIf="modaltype==2"></td>

                  <td colspan="7" *ngIf="modaltype==1"></td>
                  <td colspan="9" *ngIf="modaltype==2"></td>
                </tr>
                <!-- regular date section -->

                <tr class="tbl-tr">
                  <th *ngFor="let col of columns" [pSortableColumn]="col.field" style="width:140px;font-size: 10px;"
                    class="tbl-th">
                    {{col.header}}
                    <p-sortIcon [field]="col.field" ariaLabel="Activate to sort"
                      ariaLabelDesc="Activate to sort in descending order"
                      ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr [pSelectableRow]="rowData">

                  <td *ngFor="let col of columns">
                    <span *ngIf="col.field=='budat'">
                      {{rowData[col.field]  | date :'dd MMM, y'}}
                    </span>
                    <span *ngIf="col.field!='budat' ">
                      {{rowData[col.field]}}</span>
                  </td>
                </tr>
              </ng-template>
            </p-table>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- /.content-wrapper -->